<template>
  <vBar
    :data="chartData"
    :params="chartParams"
    :height="height"
    :width="width"
    :showCheckbox="true"
    :id="id"
    :loading="loading" />
</template>

<script setup lang="ts" name="BarStackDemo">
import { vBar } from '@/v-echarts-library/common-charts';
import { computed, onMounted, ref } from 'vue';

const id = 'BarStackDemo';
const chartData = ref({});
const width = '100%'; // å¯é€‰
const height = '400px'; // å¯é€‰
const loading = ref(true); // å¯é€‰
// å¯é€‰ï¼Œä¸ä¼ åˆ™ä½¿ç”¨é»˜è®¤Options
// const chartOptions = computed(() => {});

const chartParams = computed(() => {
  return {
    showToolBox: true,
    isCross: false,
    stackLabel: ['none', 'apply', 'apply', 'standard'], // æ•ˆæœåŒ stackIndex: [1,2]
    dataset: false,
    showAverage: false,
  };
});

async function getData() {
  try {
    chartData.value = {
      xAxis: ['ç®¡ç†å®¤', 'æ•°å­—åŒ–å®¤'],
      series: [
        {
          name: 'æ‰“å¡å·¥æ—¶',
          data: [220, 430],
        },
        {
          name: 'é¡¹ç›®å·¥æ—¶',
          data: [80, 247],
        },
        {
          name: 'å¹³å°å·¥æ—¶',
          data: [144, 20],
        },
        {
          name: 'æ ‡å‡†å·¥æ—¶',
          data: [18, 17.64],
        },
      ],
    };
  } catch (error) {
    console.log('ğŸš€ ~ getData ~ error:', error);
  }
}

// åœ¨ç»„ä»¶æŒ‚è½½åè·å–æ•°æ®
onMounted(() => {
  getData();
});
</script>
